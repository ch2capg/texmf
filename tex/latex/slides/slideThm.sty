%  Revision history
%  --------------------------------------------------
% 
%       Revised by Christian Power July 2016
%       Originally written by Christian Power
%            (power22c@gmail.com) 05.06.2017
% 
%  Produce nice lines next to the theorems for the beamer class.
%  Copyright (c) 2017 Christian Power.  All rights reserved.
% ----------------------------------------------------------------------

\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{slideThm}[2017/06/07 v0.0.1 Hatcher style for theorems]

\RequirePackage[framemethod=tikz]{mdframed}

\mdfsetup{skipabove=\topskip plus .3\topskip minus .3\topskip,
  skipbelow=\topskip plus .3\topskip minus .3\topskip}
\global\mdfdefinestyle{satzmdf}{
  outerlinewidth=.8pt,
  outerlinecolor=blue,% outerlinecolor=blue,
  innerlinewidth=.8pt,
  innerlinecolor=blue,% innerlinecolor=blue,
  middlelinewidth=.8pt,
  middlelinecolor=white,
  bottomline=false,
  topline=false,
  rightline=false
}
\global\mdfdefinestyle{defimdf}{
  outerlinewidth=.8pt,
  outerlinecolor=blue,
  innerlinewidth=.8pt,
  innerlinecolor=blue,
  middlelinewidth=.8pt,
  middlelinecolor=white,
  bottomline=false,
  topline=false,
  rightline=false
}

% ----------------------------------------------------------------------
\newtheoremstyle{satz}
{-\topsep}                   %Space above
{2ex plus 2ex minus 2ex}                   %Space below
{\normalfont}           %Body font
{}                      %Indent amount (empty = no indent,
                          %\parindent = para indent)
{\normalfont\sffamily\bfseries}  %Thm head font
{.}                     %Punctuation after thm head
{.5em}              %Space after thm head: " " = normal interword
                          %space; \newline = linebreak
{\thmname{#1}\thmnumber{ #2}\thmnote{ (#3)}}
                          %Thm head spec (can be left empty, meaning
                          %`normal')
\newtheoremstyle{defi}
{-1ex}                   %Space above
{2ex plus 2ex minus 2ex}                   %Space below
{\normalfont}            %Body font
{}                      %Indent amount (empty = no indent,
                          %\parindent = para indent)
{\normalfont\sffamily\bfseries}  %Thm head font
{.}                     %Punctuation after thm head
{.5em}              %Space after thm head: " " = normal interword
                          %space; \newline = linebreak
{\thmname{#1}\thmnumber{ #2}\thmnote{ (#3)}}
                          %Thm head spec (can be left empty, meaning
                          %`normal')
\newtheoremstyle{defiNoFrame}
{1ex plus .5ex minus .5ex}                   %Space above
{3ex plus 1ex minus 2ex}                   %Space below
{\normalfont}           %Body font
{}                      %Indent amount (empty = no indent,
                        %\parindent = para indent)
{\normalfont\sffamily\bfseries}  %Thm head font
{.}                     %Punctuation after thm head
{.5em}              %Space after thm head: " " = normal interword
                        %space; \newline = linebreak
{\thmname{#1}\thmnumber{ #2}\thmnote{ (#3)}}
                        %Thm head spec (can be left empty, meaning
                        %`normal')
% ------------------------------
\theoremstyle{satz}
\newtheorem{lemmaSlide}{Lemma}[section]
\surroundwithmdframed[style=satzmdf]{lemmaSlide}
\newtheorem{propositionSlide}[lemmaSlide]{Proposition}
\surroundwithmdframed[style=satzmdf]{propositionSlide}
\newtheorem{corollarySlide}[lemmaSlide]{Corollary}
\surroundwithmdframed[style=satzmdf]{corollarySlide}
\newtheorem{theoremSlide}[lemmaSlide]{Theorem}
\surroundwithmdframed[style=satzmdf]{theoremSlide}
\theoremstyle{defi}
\newtheorem{definitionSlide}[lemmaSlide]{Definition}
\surroundwithmdframed[style=defimdf]{definitionSlide}
\newtheorem*{definitionSlide*}{Definition}
\surroundwithmdframed[style=defimdf]{definitionSlide*}
\newtheorem{parDifEqSlide}[lemmaSlide]{PDE}
\surroundwithmdframed[style=defimdf]{parDifEqSlide}
\newtheorem*{parDifEqSlide*}{PDE}
\surroundwithmdframed[style=defimdf]{parDifEqSlide*}
% \newtheorem{assumption}[lemmaSlide]{Assumption}
% \surroundwithmdframed[style=defimdf,
% outerlinecolor=red,
% innerlinecolor=red]{assumption}
\theoremstyle{defiNoFrame}
\newtheorem{remarkSlide}[lemmaSlide]{Remark}
\newtheorem{problemSlide}[lemmaSlide]{Problem}
\newtheorem{assumptionSlide}[lemmaSlide]{Assumption}
\newtheorem{exampleSlide}[lemmaSlide]{Example}

% Problem: mdframed.sty produces weird spacing
% Correct spacing for the environments

\addtobeamertemplate{theorem begin}{\vspace*{-1.9ex}}{}
\addtobeamertemplate{theorem end}{\vspace*{-.6ex}}{}

\newlength{\hatcherBoxBegin}
\setlength{\hatcherBoxBegin}{-.5ex plus .25ex minus .5ex}
\newlength{\hatcherBoxEnd}
\setlength{\hatcherBoxEnd}{1ex plus .25ex minus .5ex}
\newlength{\normalBoxBegin}
\setlength{\normalBoxBegin}{1.25ex plus .25ex minus .75ex}
\newlength{\normalBoxEnd}
\setlength{\normalBoxEnd}{.75ex plus .25ex minus .5ex}

% White space for a Hatcher box
\newcommand\wsHatcher[2]{
  \newenvironment{#2}
  {\vspace*{\hatcherBoxBegin}\begin{#1}}
  {\end{#1}\vspace*{\hatcherBoxEnd}}
}
% renewenvironment variant
\newcommand\wsHatcherRN[2]{
  \renewenvironment{#2}
  {\vspace*{\hatcherBoxBegin}\begin{#1}}
  {\end{#1}\vspace*{\hatcherBoxEnd}}
}
% White space for normal box
\newcommand\wsNormalBox[2]{
  \newenvironment{#2}
  {\vspace*{\normalBoxBegin}\begin{#1}}
  {\end{#1}\vspace*{\normalBoxEnd}}
}
% renewenvironment variant
\newcommand\wsNormalBoxRN[2]{
  \renewenvironment{#2}
  {\vspace*{\normalBoxBegin}\begin{#1}}
  {\end{#1}\vspace*{\normalBoxEnd}}
}
\wsHatcherRN{lemmaSlide}{lemma}
\wsHatcher{propositionSlide}{proposition}
\wsHatcherRN{corollarySlide}{corollary}
\wsHatcherRN{theoremSlide}{theorem}
\wsHatcherRN{definitionSlide}{definition}
\wsHatcher{definitionSlide*}{definition*}
\wsHatcher{parDifEqSlide}{parDifEq}
\wsHatcher{parDifEqSlide*}{parDifEq*}
\wsNormalBox{remarkSlide}{remark}
\wsNormalBoxRN{problemSlide}{problem}
\wsNormalBox{assumptionsSlide}{assumptions}
\wsNormalBoxRN{exampleSlide}{example}
